<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>OAuth Authenticate</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="./stylesheets/style.css">
</head>

<body>
  <div class='container'>
    <h1>Vincula Alexa con SwiftDo</h1>
    <div class="imgContainer">
      <div>
        <img src="./img/alexa.png" alt="alexa">
      </div>
      <div>
        <img src="./img/right arrow.png" alt="arrow" style="width:180px">
      </div>
      <div>
        <img src="./img/icon.png" alt="logo">
      </div>
    </div>
    <div class="formContainer">
      <form action='/oauth/authorize' method="post">
        <div class='form-group' hidden>
          <label>Client Id</label>
          <input class='form-control' name='client_id' />
        </div>
        <div class='form-group' hidden>
          <label>Redirect Uri</label>
          <input class='form-control' name='redirect_uri' />
        </div>
        <div class='form-group' hidden>
          <label>Response Type</label>
          <input class='form-control' name='response_type' />
        </div>
        <div class='form-group' hidden>
          <label>Grant Type</label>
          <input class='form-control' name='grant_type' />
        </div>
        <div class='form-group' hidden>
          <label>State</label>
          <input class='form-control' name='state' />
        </div>
        <div class="form-group">
          <label>Correo electrónico</label>
          <input class='form-control auth' type="text" name="email" value="">
        </div>
        <div class="form-group">
          <label>Contraseña</label>
          <input class='form-control auth' type="password" name="password" value=""/>
        </div>
        <input type='submit' class='btn btn-success' value="Vincular"/>
      </form>
    </div>
  </div>
  <script>
    ; (function () {
      const urlParams = new URLSearchParams(window.location.search)
        ;['client_id', 'redirect_uri', 'response_type', 'grant_type', 'state'].forEach(type => {
          const input = document.body.querySelector(`input[name=${type}]`)
          const value = urlParams.get(type)
          input.value = value
        })
      const error = urlParams.get('success') === 'false'
      if (error) {
        document.body.querySelectorAll('.auth').forEach(el => el.classList.add('is-invalid'))
      }
    }())
  </script>
</body>

</html>